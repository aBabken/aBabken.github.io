

//100vh мобайл
let vh = window.innerHeight * 0.01;
document.documentElement.style.setProperty('--vh', `${vh}px`);
window.addEventListener('resize', () => {
  document.documentElement.style.setProperty('--vh', `${vh}px`);
});
jQuery(document).ready(function ($){

  $(document).on('click', '.js-cart-page-sidebar__make--item', function (e) {
    e.preventDefault();
    $(this).siblings('.js-cart-page-sidebar__make--item').removeClass('js-active');
    $(this).addClass('js-active');
  });

  $(document).on('change', '.input-grey', function (e) {
    if ($(this).val() == '') {
      $(this).removeClass('js-active');
    } else {
      $(this).addClass('js-active');
    }
  });

    $(document).on('click', '.count__btn', function (e) {
        e.preventDefault();
        let number = $(this).siblings('.count__number').text();
        let number2 = $(this).siblings('.count__number');
        console.log(number)
        if ($(this).hasClass('plus')) {
            number++
            console.log('plus')
            number2.text(number)
        }else {
            if (number >= 1) {
                number--
                number2.text(number)
            }
        }
    });

    $(document).on('click', '.js-cart-payments-page__item', function (e) {
        $(this).siblings().removeClass('js-active');
        $(this).addClass('js-active');
    });

    $(document).on('click', '.js-cart-payments-page__personal-dataa', function (e) {
        e.preventDefault();
        $(this).toggleClass('js-active');
    });

    $(document).on('click', '.js-cart-delivery-item', function (e) {
        let parents = $(this).parents('.cart-payments-page__item');
        parents.siblings().removeClass('js-active');
        parents.addClass('js-active');
        parents.siblings().find('.cart-delivery-item__content').slideUp();
        $(this).siblings().slideDown();

    });

    $(document).on('click', '.js-cart-delivery-comments__header', function (e) {
        $(this).toggleClass('js-active');
        $(this).siblings().slideToggle();
    });

    $(document).on('click', '.cart-delivery-point__pickup-point--item', function (e) {
        $(this).siblings().removeClass('js-active');
        $(this).addClass('js-active');
    });

    setTimeout(function (e) {
        $('.bg-overley').addClass('js-active');
        $('.popup-discount').addClass('js-active');
    }, 1000)
    $(document).on('click', '.js-popup-discount__btn', function (e) {
        e.preventDefault();
        $(this).parents('.popup-discount').removeClass('js-active');
        $('.bg-overley').removeClass('js-active');
    });
    $(document).on('click', '.bg-overley', function (e) {
        e.preventDefault();
        $('.popup-discount').removeClass('js-active');
        $(this).removeClass('js-active');
    });
    if ($('[data-toggle="datepicker"]').length) {
        $('[data-toggle="datepicker"]').datepicker();
    }

    var count_ar = [
        "al",
        "ad",
        "at",
        "by",
        "be",
        "ba",
        "bg",
        "hr",
        "cz",
        "dk",
        "ee",
        "fo",
        "fi",
        "fr",
        "de",
        "gi",
        "gr",
        "va",
        "hu",
        "is",
        "ie",
        "it",
        "lv",
        "li",
        "lt",
        "lu",
        "mk",
        "mt",
        "md",
        "mc",
        "me",
        "nl",
        "no",
        "pl",
        "pt",
        "ro",
        "ru",
        "sm",
        "rs",
        "sk",
        "si",
        "es",
        "se",
        "ch",
        "ua",
        "gb",
    ];
    var input = document.querySelector("#phone");
    if ($('#phone').length) {
      window.intlTelInput(input, {
          initialCountry: "lv",
          onlyCountries: count_ar,
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.16/js/utils.min.js",
      });
    }
    $(document).on('click', '.iti__standard', function (e) {
        let codeCountry = $(this).find('.iti__dial-code').text();
        console.log(codeCountry)
        $('#phone').val(codeCountry)
    });

    $('.header-new-drop__item').hover( function (e){
        let img = $(this).attr('data-img');
        $(this).parents('.header-new-drop__list').siblings('.header-new-drop__img').find('.js-img-drop').attr('src', img);
    });

    $(document).on('click', '.js-drop-newmenu', function (e){
       e.preventDefault();
       let numberMenu = $(this).attr('data-menu');
       if ($('.header-new__drops').find('.header-new__drop').eq(numberMenu).hasClass('js-active')) {
           $('.header-new__drops').find('.header-new__drop').eq(numberMenu).removeClass('js-active');
           console.log('false')
       }else {
           console.log('true')
           $('.header-new__drops').find('.header-new__drop').siblings().removeClass('js-active')
           $('.header-new__drops').find('.header-new__drop').eq(numberMenu).addClass('js-active');
       }
    });

    $(document).mouseup(function (e){ // событие клика по веб-документу
        let div = $('.vz-header');
        if (!div.is(e.target) // если клик был не по нашему блоку
            && div.has(e.target).length === 0) { // и не по его дочерним элементам
            $(".header-new-drop").removeClass('js-active'); // скрываем его
            console.log(2)
        }
    });

    $(".js-phone-mobile-btn").click( function (e){
        $(this).toggleClass('js-active')
    });

    $(document).mouseup(function (e){ // событие клика по веб-документу
        let div = $('.js-phone-mobile-btn');
        if (!div.is(e.target) // если клик был не по нашему блоку
            && div.has(e.target).length === 0) { // и не по его дочерним элементам
            div.removeClass('js-active'); // скрываем его
            console.log(3)
        }
    });

    $('.phone-mobile-btn__text').on("animationend", function(){
        $(this).removeClass('js-active');
        setTimeout(function (){
            $('.phone-mobile-btn__text').addClass('js-active')
        }, 5000)
    });

});

// select

for (const dropdown of document.querySelectorAll('.select__trigger')) {
  dropdown.addEventListener('click', function (e) {
    e.preventDefault();
    this.parentNode.classList.toggle('open');
    // document.body.style.overflow = document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
    // if (window.innerWidth < 992) {
    //   document.body.style.overflow = 'hidden';
    // }
  });
}
for (const dropdownClose of document.querySelectorAll('.select-mobile-back')) {
  dropdownClose.addEventListener('click', function (e) {
    e.preventDefault();
    this.parentNode.parentNode.parentNode.classList.remove('open');
    // document.body.style.overflow = document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
  });
}
for (const dropdownClose of document.querySelectorAll('.catalog__filter .select-mobile-back')) {
  dropdownClose.addEventListener('click', function (e) {
    if (window.innerWidth < 992) {
      // document.body.style.overflow = 'hidden';
    }
  });
}
for (const dropdownClose of document.querySelectorAll('.mytour__filter .select-mobile-back')) {
  dropdownClose.addEventListener('click', function (e) {
    if (window.innerWidth < 992) {
      // document.body.style.overflow = 'hidden';
    }
  });
}
for (const dropdown of document.querySelectorAll('.select__options')) {
  dropdown.addEventListener('click', function (e) {
    this.parentNode.parentNode.classList.toggle('open');
    // document.body.style.overflow = document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
  });
}
for (const select of document.querySelectorAll('.select__content')) {
  window.addEventListener('click', function (e) {
    if (select.classList.contains('open')) {
      if (!select.contains(e.target)) {
        select.classList.remove('open');
        // document.body.style.overflow =
        //     document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
      }
    }
  });
}
for (const option of document.querySelectorAll('.select__option')) {
  option.addEventListener('click', function () {
    if (!this.classList.contains('selected')) {
      if (this.parentNode.querySelector('.select__option.selected')) {
        this.parentNode.querySelector('.select__option.selected').classList.remove('selected');
      }
      this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.previousElementSibling.classList.remove(
          'empty',
      );
      this.classList.add('selected');
      this.closest('.select__content').querySelector('.select__trigger a').textContent =
          this.textContent;
    }
  });
}

// select-default

for (const dropdown of document.querySelectorAll('.select-default__trigger')) {
  dropdown.addEventListener('click', function () {
    this.parentNode.classList.toggle('open');
    document.body.style.overflow = document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
  });
}
for (const select of document.querySelectorAll('.select-default__content')) {
  window.addEventListener('click', function (e) {
    if (select.classList.contains('open')) {
      if (!select.contains(e.target)) {
        select.classList.remove('open');
        document.body.style.overflow =
            document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
      }
    }
  });
}

for (const dropdown of document.querySelectorAll('.select-default__options')) {
  dropdown.addEventListener('click', function (e) {
    this.parentNode.parentNode.classList.toggle('open');
    document.body.style.overflow = document.body.style.overflow == 'hidden' ? 'visible' : 'hidden';
  });
}
for (const option of document.querySelectorAll('.select-default__option')) {
  option.addEventListener('click', function () {
    if (!this.classList.contains('selected')) {
      this.parentNode
          .querySelector('.select-default__option.selected')
          .classList.remove('selected');
      this.classList.add('selected');
      this.closest('.select-default__content').querySelector(
          '.select-default__trigger a',
      ).textContent = this.textContent;
    }
  });
}